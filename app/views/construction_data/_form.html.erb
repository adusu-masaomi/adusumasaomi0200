<%= simple_form_for @construction_datum, :html => { :class => 'well form-horizontal' } do |f| %>
  
  <% if @construction_datum.errors.any? %>
  <div id="error_explanation">
    <h2><%= @construction_datum.errors.count %>件のエラーがあります。</h2>
 
    <ul>
    <% @construction_datum.errors.full_messages.each do |msg| %>
      <li><%= msg %></li>
    <% end %>
    </ul>
  </div>
 <% end %>
 
  <%= f.input :construction_code , input_html:{:tabindex=>"0"} %>
  <%= f.input :construction_name , input_html:{:tabindex=>"1"} %>
  <!--<%= f.input :alias_name ,  input_html:{:tabindex=>"2", value: f.object.alias_name || '-', style: 'width:250px'} %>-->
  <%= f.input :alias_name ,  input_html:{:tabindex=>"2", style: 'width:250px'} %>
  <%= f.input :reception_date , input_html:{:tabindex=>"3"} %>
  <%= f.label :得意先, {:class => "my-custom-class-l" }  %></br>
  <%= f.collection_select :customer_id, CustomerMaster.all, :id, :customer_name, {:prompt => "どれか一つを選択して下さい"} , {id:"customer_id", :tabindex=>"4", class: "searchableCustomerName" , style: 'width:330px' } %>
  </br></br>
  <%= f.input :construction_period_start, default: Date.strptime("2021/01/01", "%Y/%m/%d"), hint: "*未定の場合は、このまま未入力にして下さい。", input_html:{:tabindex=>"5"} %>
  <%= f.input :construction_period_end, default: Date.strptime("2021/01/01", "%Y/%m/%d"), hint: "*未定の場合は、このまま未入力にして下さい。", input_html:{:tabindex=>"6"} %>
  
  <!--<%= f.input :construction_start_date, default: Date.strptime("3000/01/01", "%Y/%m/%d"), hint: "*工事日報の登録後に反映されます。このまま未入力にして下さい。", input_html:{:tabindex=>"5"} %>-->
  <!--<%= f.input :construction_end_date, default: Date.strptime("2000/01/01", "%Y/%m/%d"), hint: "*工事日報の登録後に反映されます。このまま未入力にして下さい。",  input_html:{:tabindex=>"6"} %>-->
  
  <%= f.input :post , hint: "＊数値のみ（ハイフンなし）で入力して下さい。" ,  
                       input_html:{id:"post",  :onchange => "formatPost()", :onKeyUp => "AjaxZip3.zip2addr(this,'','addressX','addressX');", :tabindex=>"7"} %>
  <%= f.input :construction_place , input_html:{id:"address", name:"addressX", :tabindex=>"8"} %>
  
  <%= f.check_box :billed_flag %> 
  <%= f.label :billed_flag, "請求済み", {style: 'color: blue'} %></br></br>
    
  <!--<%= f.button :submit, :class => 'btn-primary' %>-->
  <input type="button" onclick="submit();" class = 'btn btn-primary' value="登録する" />
  <%= link_to t('.cancel', :default => t("helpers.links.cancel")),
                construction_data_path, :class => 'btn btn-default' %>
<% end %>


<script src="https://ajaxzip3.github.io/ajaxzip3.js" charset="UTF-8"></script>
<script type="text/javascript">

  $(document).ready(function(){
  //$(document).on('turbolinks:load', function(){
      //検索可能なリストボックス(品名の場合)
       $(".searchableCustomerName").select2({ theme: "bootstrap" });
	   
       //select2をenterキー押下した場合(リストが閉じられた時)のタブ移動。イマイチだが・・
	   $( ".searchableCustomerName" ).on("select2:close", function (e) {
	     $('[tabindex=5]').focus(); 
	   });
	 
       //$(".searchableConstructionCode").change(function(e) {
       //  setConstructionDateDefault();
       //});  

  });
  
</script>
